<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NIM Game</title>
<!-- Add Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
.coin-button {
    width: 60px;
    height: 30px;
    margin-bottom: 5px;
    background-color: #777;
    border: none;
    color: #fff;
    cursor: pointer;
}
</style>
</head>
<body>
<div class="container">
    <h1>Welcome to the infamous name of NIM!</h1>
    <p>11.45 In this game, NIM plays first. Each player can alternatively move 1, 3, or 4 coins (with the condition that you are not removing more coins than exist). The player to remove the last coin wins.</p>
    <p>How many coins do you want to start with?</p>
    <div class="mb-3">
        <input type="number" id="startCoins" class="form-control">
    </div>
    <button onclick="startGame()" class="btn btn-primary">Start Game</button>

    <div id="coinStack" class="mt-4"></div>
</div>

<!-- Add Bootstrap JS (Optional, if you want to use Bootstrap JavaScript components) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

<script>
function startGame() {
    try {
        var ncoin = parseInt(document.getElementById("startCoins").value);
        if (isNaN(ncoin)) {
            throw "Input is not a number";
        }
        console.log("nim moves first");
        displayCoinStack(ncoin);
    } catch (error) {
        alert("Please enter a valid numeric value.");
    }
}

function displayCoinStack(num) {
    var stackHTML = "";
    for (var i = 0; i < num; i++) {
        stackHTML += "<button class='coin-button' onclick='removeCoins(" + (i + 1) + ")'></button><br>";
    }
    document.getElementById("coinStack").innerHTML = stackHTML;
}

function removeCoins(position) {
    var coinButtons = document.getElementsByClassName("coin-button");
    for (var i = 0; i < position; i++) {
        coinButtons[i].style.backgroundColor = "#fff";
        coinButtons[i].style.cursor = "default";
        coinButtons[i].onclick = null;
    }
    nimMoves(position);
}

function nimMoves(num) {
    var choice = 0;
    if (num % 7 === 1 || num % 7 === 2 || num % 7 === 3 || num % 7 === 0) {
        choice = 1;
    } else if (num % 7 === 5) {
        choice = 3;
    } else if (num % 7 === 4 || num % 7 === 6) {
        choice = 4;
    }
    var coinStack = document.getElementById("coinStack");
    coinStack.innerHTML = "";
    var stackHTML = "";
    for (var i = 0; i < num - choice; i++) {
        stackHTML += "<button class='coin-button' onclick='removeCoins(" + (i + 1) + ")'></button><br>";
    }
    coinStack.innerHTML = stackHTML;
    console.log("Nim removes " + choice + " coin(s)");
    if (num === 0) {
        alert("NIM WINS! BWA-HA-HA-HA-HA! NIM TAKES OVER");
        return;
    }
}
</script>
</body>
</html>
